<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¡¦å‡‡çš„AIå°ç«™</title>
    <link rel="icon" href="http://xn--r8q546c.top/favicon.ico" type="image/x-icon">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6C63FF;
            --primary-dark: #5850e6;
            --primary-light: #8B85FF;
            --secondary: #FF6584;
            --accent: #4ECDC4;
            --dark: #2D3748;
            --light: #F8FAFC;
            --gray-light: #E2E8F0;
            --gray: #A0AEC0;
            --gray-dark: #718096;
            --success: #48BB78;
            --warning: #ED8936;
            --danger: #F56565;
            --card-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --header-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 24px;
            position: relative;
        }

        header {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 40px 30px;
            border-radius: 16px;
            text-align: center;
            box-shadow: var(--header-shadow);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        header h1 {
            font-size: 2.8em;
            margin-bottom: 12px;
            font-weight: 700;
            letter-spacing: -0.5px;
            position: relative;
            font-variant-numeric: tabular-nums; /* ç­‰å®½æ•°å­—ï¼Œé˜²æ­¢æ—¶é—´è·³åŠ¨ */
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
            font-weight: 300;
            max-width: 600px;
            margin: 0 auto;
            position: relative;
        }

        .main-content {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        .ai-section, .nav-section, .hot-section {
            background: white;
            border-radius: 16px;
            padding: 28px;
            box-shadow: var(--card-shadow);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .ai-section:hover, .nav-section:hover, .hot-section:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.15);
        }

        .section-title {
            font-size: 1.5em;
            margin-bottom: 24px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
        }

        .section-title::before {
            content: '';
            width: 5px;
            height: 28px;
            background: var(--primary);
            border-radius: 3px;
        }

        /* AIèŠå¤©åŒºåŸŸ */
        .chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .chat-actions {
            display: flex;
            gap: 12px;
        }

        .model-selector {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .model-btn {
            padding: 12px 22px;
            border: 2px solid var(--gray-light);
            background: white;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            font-weight: 500;
            color: var(--dark);
        }

        .model-btn:hover {
            border-color: var(--primary);
            background: rgba(108, 99, 255, 0.05);
            transform: translateY(-2px);
        }

        .model-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            box-shadow: 0 4px 12px rgba(108, 99, 255, 0.3);
        }

        .new-chat-btn {
            padding: 12px 24px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(78, 205, 196, 0.3);
        }

        .new-chat-btn:hover {
            background: #3cbab4;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(78, 205, 196, 0.4);
        }

        .history-toggle-btn {
            padding: 12px 24px;
            background: var(--primary-light);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(108, 99, 255, 0.3);
        }

        .history-toggle-btn:hover {
            background: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(108, 99, 255, 0.4);
        }

        .chat-container {
            height: 400px;
            overflow-y: auto;
            border: 1px solid var(--gray-light);
            border-radius: 12px;
            padding: 20px;
            background: var(--light);
            margin-bottom: 20px;
            scroll-behavior: smooth;
        }

        .chat-container::-webkit-scrollbar {
            width: 6px;
        }

        .chat-container::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .chat-container::-webkit-scrollbar-thumb {
            background: var(--primary-light);
            border-radius: 10px;
        }

        .message {
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.user {
            align-items: flex-end;
        }

        .message-content {
            max-width: 80%;
            padding: 16px 20px;
            border-radius: 18px;
            word-wrap: break-word;
            line-height: 1.5;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .message.user .message-content {
            background: var(--primary);
            color: white;
            border-bottom-right-radius: 6px;
        }

        .message.assistant .message-content {
            background: white;
            border: 1px solid var(--gray-light);
            border-bottom-left-radius: 6px;
        }

        .input-area {
            display: flex;
            gap: 12px;
        }

        .input-area textarea {
            flex: 1;
            padding: 16px;
            border: 1px solid var(--gray-light);
            border-radius: 12px;
            resize: vertical;
            min-height: 60px;
            font-family: inherit;
            font-size: 15px;
            transition: all 0.3s;
            background: white;
        }

        .input-area textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(108, 99, 255, 0.1);
        }

        .send-btn {
            padding: 16px 32px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(108, 99, 255, 0.3);
        }

        .send-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(108, 99, 255, 0.4);
        }

        .send-btn:disabled {
            background: var(--gray);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* ç½‘ç«™å¯¼èˆª - æ”¹è¿›çš„æ‚¬åœæ•ˆæœ */
        .nav-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            gap: 18px;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 15px;
            background: var(--light);
            border-radius: 12px;
            text-decoration: none;
            color: var(--dark);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 1px solid transparent;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            position: relative;
            overflow: hidden;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            opacity: 0;
            transition: opacity 0.4s ease;
            z-index: 0;
        }

        .nav-item:hover::before {
            opacity: 1;
        }

        .nav-item > * {
            position: relative;
            z-index: 1;
        }

        .nav-item:hover {
            color: white;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(108, 99, 255, 0.3);
            border-color: var(--primary);
        }

        .nav-icon {
            width: 36px;
            height: 36px;
            object-fit: contain;
            margin-bottom: 12px;
            border-radius: 8px;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.1);
            padding: 4px;
        }

        .nav-icon::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.4),
                transparent
            );
            transition: left 0.6s;
        }

        .nav-item:hover .nav-icon {
            transform: scale(1.15) rotate(5deg);
            box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.8),
                        0 0 10px rgba(255, 255, 255, 0.5);
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
        }

        .nav-item:hover .nav-icon::before {
            left: 100%;
        }

        .nav-title {
            font-size: 14px;
            text-align: center;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        /* çƒ­ç‚¹èµ„è®¯ */
        .hot-item {
            padding: 16px 0;
            border-bottom: 1px solid var(--gray-light);
            transition: background 0.2s;
            border-radius: 8px;
            padding-left: 10px;
            padding-right: 10px;
        }

        .hot-item:hover {
            background: rgba(108, 99, 255, 0.05);
        }

        .hot-item:last-child {
            border-bottom: none;
        }

        .hot-item h4 {
            font-size: 15px;
            margin-bottom: 8px;
            color: var(--dark);
            cursor: pointer;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            font-weight: 500;
            transition: color 0.2s;
        }

        .hot-item h4:hover {
            color: var(--primary);
        }

        .hot-item p {
            font-size: 13px;
            color: var(--gray-dark);
        }

        .hot-source {
            display: inline-block;
            padding: 4px 10px;
            background: var(--gray-light);
            border-radius: 6px;
            font-size: 12px;
            margin-right: 10px;
            font-weight: 500;
        }

        .loading {
            text-align: center;
            padding: 30px;
            color: var(--gray);
            font-size: 15px;
        }

        .error {
            background: rgba(245, 101, 101, 0.1);
            color: var(--danger);
            padding: 12px 16px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid var(--danger);
        }

        /* å¹³å°åˆ‡æ¢æ ‡ç­¾æ ·å¼ */
        .platform-tabs {
            display: flex;
            gap: 10px;
            border-bottom: 1px solid var(--gray-light);
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .tab-btn {
            flex: 1;
            padding: 10px 12px;
            border: none;
            background: var(--light);
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
            color: var(--gray-dark);
        }

        .tab-btn:hover {
            background: rgba(108, 99, 255, 0.1);
            color: var(--primary);
        }

        .tab-btn.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 12px rgba(108, 99, 255, 0.3);
        }

        .rank-num {
            display: inline-block;
            width: 26px;
            height: 26px;
            line-height: 26px;
            text-align: center;
            border-radius: 6px;
            margin-right: 12px;
            font-weight: bold;
            font-size: 13px;
        }

        .rank-hot { background: var(--danger); color: white; }
        .rank-new { background: var(--accent); color: white; }
        .rank-normal { background: var(--gray-light); color: var(--gray-dark); }

        /* å†å²ä¼šè¯ä¾§è¾¹æ  */
        .history-sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 380px;
            height: 100%;
            background: white;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
            transition: right 0.3s ease;
            z-index: 1000;
            padding: 20px;
            overflow-y: auto;
        }

        .history-sidebar.active {
            right: 0;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: none;
        }

        .overlay.active {
            display: block;
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .history-title {
            font-size: 1.3em;
            color: var(--primary);
            font-weight: 600;
        }

        .close-history-btn {
            padding: 8px 16px;
            background: var(--gray-dark);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.3s;
        }

        .close-history-btn:hover {
            background: var(--dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(113, 128, 150, 0.3);
        }

        .clear-history-btn {
            padding: 8px 16px;
            background: var(--danger);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.3s;
            margin-right: 8px;
        }

        .clear-history-btn:hover {
            background: #e53e3e;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(245, 101, 101, 0.3);
        }

        .history-list {
            max-height: calc(100vh - 120px);
            overflow-y: auto;
        }

        .history-list::-webkit-scrollbar {
            width: 6px;
        }

        .history-list::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .history-list::-webkit-scrollbar-thumb {
            background: var(--primary-light);
            border-radius: 10px;
        }

        .history-item {
            padding: 16px;
            border-bottom: 1px solid var(--gray-light);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            border-radius: 10px;
            margin-bottom: 8px;
        }

        .history-item:hover {
            background: rgba(108, 99, 255, 0.05);
            transform: translateX(5px);
        }

        .history-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .history-item.active {
            background: rgba(108, 99, 255, 0.1);
            border-left: 4px solid var(--primary);
        }

        .history-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .history-item-name {
            font-size: 15px;
            font-weight: 500;
            color: var(--dark);
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .history-item-delete {
            padding: 5px 10px;
            background: var(--danger);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            margin-left: 8px;
            opacity: 0.7;
            transition: all 0.3s;
        }

        .history-item-delete:hover {
            opacity: 1;
            transform: scale(1.05);
        }

        .history-item-info {
            font-size: 13px;
            color: var(--gray-dark);
            display: flex;
            justify-content: space-between;
        }

        .history-item-model {
            font-size: 12px;
            background: var(--gray-light);
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: 500;
        }

        .empty-history {
            text-align: center;
            padding: 40px 20px;
            color: var(--gray);
            font-size: 15px;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 1024px) {
            .container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .history-sidebar {
                width: 320px;
                right: -320px;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            header {
                padding: 30px 20px;
            }
            
            header h1 {
                font-size: 2.2em;
            }
            
            .ai-section, .nav-section, .hot-section {
                padding: 20px;
            }
            
            .nav-grid {
                grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
            }
            
            .chat-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            .chat-actions {
                width: 100%;
                justify-content: flex-start;
            }
            
            .model-selector {
                justify-content: flex-start;
            }
            
            .message-content {
                max-width: 90%;
            }
            
            .history-sidebar {
                width: 280px;
                right: -280px;
            }
        }

        @media (max-width: 480px) {
            .model-selector {
                flex-direction: column;
            }
            
            .model-btn {
                width: 100%;
            }
            
            .chat-actions {
                flex-direction: column;
            }
            
            .new-chat-btn, .history-toggle-btn {
                width: 100%;
            }
            
            .input-area {
                flex-direction: column;
            }
            
            .send-btn {
                width: 100%;
            }
            
            .history-sidebar {
                width: 100%;
                right: -100%;
            }
        }

        /* ============ æ€è€ƒè¿‡ç¨‹ä¸“ç”¨æ ·å¼ ============ */
        .message.thinking {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #f0f2f5 0%, #e4e7eb 100%);
            border: 1px solid #d0d7e0;
            border-radius: 12px;
            margin: 15px 0;
            padding: 18px;
        }

        .message.thinking .thinking-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
            color: var(--gray-dark);
            font-weight: 600;
            font-size: 14px;
        }

        .thinking-icon {
            width: 24px;
            height: 24px;
            border: 2px solid var(--primary);
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .message.thinking .message-content {
            background: transparent !important;
            border: none !important;
            color: var(--dark);
            font-size: 14px;
            line-height: 1.7;
            white-space: pre-wrap;
            max-width: 100%;
        }

        /* æ€è€ƒå®ŒæˆçŠ¶æ€ */
        .message.thinking.completed .thinking-icon {
            animation: none;
            border-color: var(--success);
            background: var(--success);
            position: relative;
        }

        .message.thinking.completed .thinking-icon::after {
            content: 'âœ“';
            color: white;
            font-size: 14px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .message.thinking.completed .thinking-header span:last-child::after {
            content: ' (å®Œæˆ)';
            color: var(--gray);
        }

        /* æ”¶èµ·æ€è€ƒè¿‡ç¨‹çš„æŒ‰é’® */
        .thinking-collapse-btn {
            margin-top: 8px;
            padding: 6px 12px;
            background: var(--gray-light);
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            color: var(--gray-dark);
            transition: all 0.3s;
        }

        .thinking-collapse-btn:hover {
            background: var(--primary);
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1 id="currentTime">00:00:00</h1>
            <p id="currentDate">2025-01-01</p>
        </header>

        <main class="main-content">
            <!-- AIæ¨¡å‹ä½¿ç”¨åŒºåŸŸ -->
            <section class="ai-section">
                <div class="chat-header">
                    <h2 class="section-title">AIæ¨¡å‹å¯¹è¯</h2>
                    <div class="chat-actions">
                        <button class="new-chat-btn" onclick="createNewSession()">+ æ–°å»ºä¼šè¯</button>
                        <button class="history-toggle-btn" id="historyToggleBtn" onclick="toggleHistorySidebar()">ğŸ“š å†å²ä¼šè¯</button>
                    </div>
                </div>
                <div class="model-selector">
                    <button class="model-btn active" data-model="kimi-k2" data-key="KIMI_API_KEY">Kimi-K2</button>
                    <button class="model-btn" data-model="deepseek-chat" data-key="DEEPSEEK_API_KEY">DeepSeek-Chat</button>
                    <button class="model-btn" data-model="deepseek-reasoner" data-key="DEEPSEEK_API_KEY">DeepSeek-Reasoner</button>
                    <button class="model-btn" data-model="glm-4" data-key="GLM_API_KEY">GLM-4.6</button>
                    <button class="model-btn" data-model="qwen-max" data-key="QWEN_API_KEY">Qwen3-Max</button>
                </div>
                <div class="chat-container" id="chatContainer">
                    <div class="message assistant">
                        <div class="message-content">æ‚¨å¥½ï¼è¯·é€‰æ‹©æ¨¡å‹å¹¶å¼€å§‹å¯¹è¯ã€‚</div>
                    </div>
                </div>
                <div class="input-area">
                    <textarea id="userInput" placeholder="è¾“å…¥æ‚¨çš„é—®é¢˜..."></textarea>
                    <button class="send-btn" onclick="sendMessage()">å‘é€</button>
                </div>
            </section>

            <!-- ç½‘ç«™å¯¼èˆªåŒºåŸŸ -->
            <section class="nav-section">
                <h2 class="section-title">å¸¸ç”¨ç½‘ç«™å¯¼èˆª</h2>
                <div class="nav-grid">
                    <a href="https://www.zhihu.com" target="_blank" class="nav-item">
                        <img src="https://static.zhihu.com/static/favicon.ico" alt="çŸ¥ä¹" class="nav-icon">
                        <span class="nav-title">çŸ¥ä¹</span>
                    </a>
                    <a href="https://www.bilibili.com" target="_blank" class="nav-item">
                        <img src="https://www.bilibili.com/favicon.ico" alt="Bç«™" class="nav-icon">
                        <span class="nav-title">Bç«™</span>
                    </a>
                    <a href="https://weibo.com" target="_blank" class="nav-item">
                        <img src="https://weibo.com/favicon.ico" alt="å¾®åš" class="nav-icon">
                        <span class="nav-title">å¾®åš</span>
                    </a>
                    <a href="https://github.com" target="_blank" class="nav-item">
                        <img src="https://github.com/favicon.ico" alt="GitHub" class="nav-icon">
                        <span class="nav-title">GitHub</span>
                    </a>
                    <a href="https://www.douban.com" target="_blank" class="nav-item">
                        <img src="https://www.douban.com/favicon.ico" alt="è±†ç“£" class="nav-icon">
                        <span class="nav-title">è±†ç“£</span>
                    </a>
                    <a href="https://www.baidu.com" target="_blank" class="nav-item">
                        <img src="https://www.baidu.com/favicon.ico" alt="ç™¾åº¦" class="nav-icon">
                        <span class="nav-title">ç™¾åº¦</span>
                    </a>
                    <a href="http://xn--r8q546c.top" target="_blank" class="nav-item">
                        <img src="http://xn--r8q546c.top/favicon.ico" alt="æ¡¦å‡‡çš„å°ç«™" class="nav-icon">
                        <span class="nav-title">æ¡¦å‡‡çš„å°ç«™</span>
                    </a>
                </div>
            </section>
        </main>

        <!-- çƒ­ç‚¹èµ„è®¯ä¾§è¾¹æ  -->
        <aside>
            <div class="hot-section">
                <h2 class="section-title">ğŸ”¥ ä»Šæ—¥çƒ­ç‚¹</h2>
                <div class="platform-tabs">
                    <button class="tab-btn active" onclick="switchPlatform('weibo', event)">å¾®åš</button>
                    <button class="tab-btn" onclick="switchPlatform('zhihu', event)">çŸ¥ä¹</button>
                    <button class="tab-btn" onclick="switchPlatform('bilibili', event)">Bç«™</button>
                </div>
                <div id="hotList">
                    <div class="loading">æ­£åœ¨åŠ è½½çƒ­ç‚¹...</div>
                </div>
            </div>
        </aside>
    </div>

    <!-- å†å²ä¼šè¯ä¾§è¾¹æ  -->
    <div class="history-sidebar" id="historySidebar">
        <div class="history-header">
            <h3 class="history-title">ğŸ’¬ å†å²ä¼šè¯</h3>
            <div>
                <button class="clear-history-btn" onclick="clearAllHistory()">æ¸…ç©º</button>
                <button class="close-history-btn" onclick="toggleHistorySidebar()">å…³é—­</button>
            </div>
        </div>
        <div class="history-list" id="historyList">
            <div class="empty-history">æš‚æ— å†å²ä¼šè¯</div>
        </div>
    </div>

    <!-- é®ç½©å±‚ -->
    <div class="overlay" id="overlay" onclick="toggleHistorySidebar()"></div>

    <script>
        // ============= APIé…ç½®åŒºåŸŸ =============
        const API_KEYS = {
            // Kimi-K2 APIå¯†é’¥
            KIMI_API_KEY: 'sk-CFRvCb1hXpguEBnzFNb4cTMjHS4mLIP28Aq6Pnop88SfYWVs',
            
            // DeepSeek APIå¯†é’¥
            DEEPSEEK_API_KEY: 'sk-bbc99305483f4dc9a75abe7e609171d7',
            
            // GLM-4 APIå¯†é’¥ (æ™ºè°±AI)
            GLM_API_KEY: '545e81d27eec48fba9a084c1e2faa294.Rq2KFlPG6WYqKJ6T',
            
            // Qwen APIå¯†é’¥ (é˜¿é‡Œäº‘é€šä¹‰åƒé—®)
            QWEN_API_KEY: 'sk-d3001997f3d14823919cb2753a47d33a',
            
        };
        
        // APIé…ç½®ä¿¡æ¯
        const API_CONFIGS = {
            'kimi-k2': {
                baseURL: 'https://api.moonshot.cn/v1/chat/completions',
                model: 'moonshot-v1-8k',
                name: 'Kimi-K2'
            },
            'deepseek-chat': {
                baseURL: 'https://api.deepseek.com/chat/completions',
                model: 'deepseek-chat',
                name: 'DeepSeek-Chat'
            },
            'deepseek-reasoner': {
                baseURL: 'https://api.deepseek.com/chat/completions',
                model: 'deepseek-reasoner',
                name: 'DeepSeek-Reasoner'
            },
            'glm-4': {
                baseURL: 'https://open.bigmodel.cn/api/paas/v4/chat/completions',
                model: 'GLM-4.6', 
                name: 'GLM-4.6'
            },
            'qwen-max': {
                baseURL: 'https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions',
                model: 'qwen3-max',
                name: 'Qwen3-Max'
            }
        };
        
        // ============= å…¨å±€å˜é‡ =============
        let currentModel = 'kimi-k2';
        let isLoading = false;
        let currentSessionId = null;
        let sessions = [];

        // ============= æœ¬åœ°å­˜å‚¨ç®¡ç† =============
        const STORAGE_KEY = 'ai_assistant_sessions';

        // åŠ è½½ä¼šè¯æ•°æ®
        function loadSessions() {
            try {
                const stored = localStorage.getItem(STORAGE_KEY);
                sessions = stored ? JSON.parse(stored) : [];
                if (sessions.length === 0) {
                    createNewSession(false);
                } else {
                    const lastSession = sessions[sessions.length - 1];
                    currentSessionId = lastSession.id;
                    currentModel = lastSession.model;
                    loadSession(currentSessionId);
                }
                renderHistoryList();
            } catch (error) {
                console.error('åŠ è½½ä¼šè¯å¤±è´¥:', error);
                createNewSession();
            }
        }

        // ä¿å­˜ä¼šè¯æ•°æ®
        function saveSessions() {
            try {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(sessions));
            } catch (error) {
                console.error('ä¿å­˜ä¼šè¯å¤±è´¥:', error);
            }
        }

        // ============= ä¼šè¯ç®¡ç† =============
        // åˆ›å»ºæ–°ä¼šè¯
        function createNewSession(showAlert = true) {
            if (currentSessionId) {
                saveCurrentSession();
            }

            const newSession = {
                id: Date.now().toString(),
                name: 'æ–°ä¼šè¯',
                model: currentModel,
                messages: [],
                timestamp: Date.now()
            };
            
            sessions.push(newSession);
            currentSessionId = newSession.id;
            
            clearChatHistory();
            
            addMessage('assistant', `âœ… å·²åˆ›å»ºæ–°ä¼šè¯\n\nå½“å‰æ¨¡å‹ï¼š${API_CONFIGS[currentModel].name}\nå¼€å§‹å¯¹è¯å§ï¼`);
            
            renderHistoryList();
            saveSessions();
            
            if (showAlert) {
                const chatContainer = document.getElementById('chatContainer');
                const notify = document.createElement('div');
                notify.style.cssText = `
                    position: absolute;
                    top: 10px;
                    right: 10px;
                    background: var(--accent);
                    color: white;
                    padding: 10px 18px;
                    border-radius: 8px;
                    font-size: 14px;
                    font-weight: 500;
                    z-index: 1000;
                    animation: fadeInOut 2s ease-in-out;
                    box-shadow: 0 4px 12px rgba(78, 205, 196, 0.3);
                `;
                notify.textContent = 'âœ… æ–°ä¼šè¯å·²åˆ›å»º';
                chatContainer.parentElement.style.position = 'relative';
                chatContainer.parentElement.appendChild(notify);
                setTimeout(() => notify.remove(), 2000);
            }
        }

        // ä¿å­˜å½“å‰ä¼šè¯
        function saveCurrentSession() {
            const session = sessions.find(s => s.id === currentSessionId);
            if (!session) return;
            
            const chatContainer = document.getElementById('chatContainer');
            const messages = Array.from(chatContainer.querySelectorAll('.message')).map(msg => {
                const role = msg.classList.contains('user') ? 'user' : 'assistant';
                const content = msg.querySelector('.message-content').textContent;
                return { role, content };
            });
            
            session.messages = messages;
            session.model = currentModel;
            session.timestamp = Date.now();
            
            if (messages.length > 1) {
                const firstUserMessage = messages.find(m => m.role === 'user');
                if (firstUserMessage) {
                    session.name = firstUserMessage.content.substring(0, 20) + (firstUserMessage.content.length > 20 ? '...' : '');
                }
            }
        }

        // åŠ è½½æŒ‡å®šä¼šè¯
        function loadSession(sessionId) {
            const session = sessions.find(s => s.id === sessionId);
            if (!session) return;
            
            currentSessionId = session.id;
            currentModel = session.model;
            
            document.querySelectorAll('.model-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.model === currentModel) {
                    btn.classList.add('active');
                }
            });
            
            const chatContainer = document.getElementById('chatContainer');
            chatContainer.innerHTML = '';
            
            if (session.messages.length === 0) {
                addMessage('assistant', 'æ‚¨å¥½ï¼è¯·é€‰æ‹©æ¨¡å‹å¹¶å¼€å§‹å¯¹è¯ã€‚');
            } else {
                session.messages.forEach(msg => {
                    if (!msg.content.startsWith('âœ… å·²åˆ‡æ¢åˆ°') && !msg.content.startsWith('âœ… æ–°ä¼šè¯å·²åˆ›å»º')) {
                        addMessage(msg.role, msg.content);
                    }
                });
            }
            
            renderHistoryList();
            toggleHistorySidebar();
        }

        // åˆ é™¤ä¼šè¯
        function deleteSession(sessionId, event) {
            event.stopPropagation();
            
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªä¼šè¯å—ï¼Ÿ')) {
                sessions = sessions.filter(s => s.id !== sessionId);
                
                if (currentSessionId === sessionId) {
                    if (sessions.length > 0) {
                        loadSession(sessions[sessions.length - 1].id);
                    } else {
                        createNewSession(false);
                    }
                }
                
                renderHistoryList();
                saveSessions();
            }
        }

        // æ¸…ç©ºæ‰€æœ‰å†å²
        function clearAllHistory() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å†å²ä¼šè¯å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼')) {
                sessions = [];
                localStorage.removeItem(STORAGE_KEY);
                createNewSession(false);
                renderHistoryList();
            }
        }

        // ============= å†å²åˆ—è¡¨æ¸²æŸ“ =============
        function renderHistoryList() {
            const historyList = document.getElementById('historyList');
            
            if (sessions.length === 0) {
                historyList.innerHTML = '<div class="empty-history">æš‚æ— å†å²ä¼šè¯</div>';
                return;
            }
            
            const sortedSessions = [...sessions].sort((a, b) => b.timestamp - a.timestamp);
            
            historyList.innerHTML = sortedSessions.map(session => `
                <div class="history-item ${session.id === currentSessionId ? 'active' : ''}" 
                     onclick="loadSession('${session.id}')">
                    <div class="history-item-header">
                        <div class="history-item-name">${session.name}</div>
                        <button class="history-item-delete" 
                                onclick="deleteSession('${session.id}', event)">åˆ é™¤</button>
                    </div>
                    <div class="history-item-info">
                        <span class="history-item-model">${API_CONFIGS[session.model].name}</span>
                        <span>${formatTime(session.timestamp)}</span>
                    </div>
                </div>
            `).join('');
        }

        // ============= å·¥å…·å‡½æ•° =============
        // æ ¼å¼åŒ–æ—¶é—´
        function formatTime(timestamp) {
            const date = new Date(timestamp);
            const now = new Date();
            const diff = now - date;
            
            if (diff < 60000) return 'åˆšåˆš';
            if (diff < 3600000) return Math.floor(diff / 60000) + 'åˆ†é’Ÿå‰';
            if (diff < 86400000) return Math.floor(diff / 3600000) + 'å°æ—¶å‰';
            if (diff < 604800000) return Math.floor(diff / 86400000) + 'å¤©å‰';
            
            return date.toLocaleDateString('zh-CN', { month: 'short', day: 'numeric' });
        }

        // æ¸…ç©ºèŠå¤©è®°å½•
        function clearChatHistory() {
            const chatContainer = document.getElementById('chatContainer');
            chatContainer.innerHTML = '';
        }

        // åˆ‡æ¢å†å²ä¼šè¯ä¾§è¾¹æ æ˜¾ç¤º/éšè—
        function toggleHistorySidebar() {
            const historySidebar = document.getElementById('historySidebar');
            const overlay = document.getElementById('overlay');
            
            historySidebar.classList.toggle('active');
            overlay.classList.toggle('active');
        }

        // ============= æ¨¡å‹é€‰æ‹©ï¼ˆè‡ªåŠ¨ä¿å­˜ï¼‰ =============
        document.querySelectorAll('.model-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                if (isLoading) return;
                
                clearChatHistory();
                
                document.querySelectorAll('.model-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                currentModel = this.dataset.model;
                
                createNewSession(false);
                
                addMessage('assistant', `âœ… å·²åˆ‡æ¢åˆ° ${API_CONFIGS[currentModel].name}\n\nèŠå¤©è®°å½•å·²æ¸…ç©ºã€‚`);
            });
        });

        // ============= å‘é€æ¶ˆæ¯ =============
        async function sendMessage() {
            const input = document.getElementById('userInput');
            const message = input.value.trim();
            
            if (!message || isLoading) return;

            // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
            addMessage('user', message);
            input.value = '';
            
            // æ·»åŠ åŠ è½½æç¤º
            addMessage('assistant', 'æ­£åœ¨æ€è€ƒä¸­...', 'loading');
            isLoading = true;
            
            try {
                await callAIAPI(message);
            } catch (error) {
                document.querySelector('.message.loading')?.remove();
                addMessage('assistant', `âŒ è¯·æ±‚å¤±è´¥: ${error.message}\n\nè¯·æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æ­£ç¡®ã€‚`, 'error');
            } finally {
                isLoading = false;
                saveCurrentSession();
                saveSessions();
                renderHistoryList();
            }
        }

        // ============= æ·»åŠ æ¶ˆæ¯åˆ°èŠå¤©çª—å£ =============
        function addMessage(role, content, className = '') {
            const chatContainer = document.getElementById('chatContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${role} ${className}`;
            
            // ç‰¹æ®Šå¤„ç†æ€è€ƒæ¶ˆæ¯ç»“æ„
            if (className === 'thinking') {
                messageDiv.innerHTML = `
                    <div class="thinking-header">
                        <div class="thinking-icon"></div>
                        <span>æ¨¡å‹æ­£åœ¨æ·±åº¦æ€è€ƒ...</span>
                        <button class="thinking-collapse-btn" onclick="toggleThinkingContent(this)">æ”¶èµ·</button>
                    </div>
                    <div class="message-content">${content}</div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="message-content">${content}</div>
                `;
            }
            
            chatContainer.appendChild(messageDiv);
            scrollToBottom();
            return messageDiv;
        }

        // åˆ‡æ¢æ€è€ƒå†…å®¹æ˜¾ç¤º/éšè—
        function toggleThinkingContent(button) {
            const contentDiv = button.parentElement.nextElementSibling;
            const isHidden = contentDiv.style.display === 'none';
            
            contentDiv.style.display = isHidden ? 'block' : 'none';
            button.textContent = isHidden ? 'æ”¶èµ·' : 'å±•å¼€';
        }

        // ============= è°ƒç”¨AI APIï¼ˆæ”¯æŒæ€è€ƒè¿‡ç¨‹ï¼‰ =============
        async function callAIAPI(message) {
            const config = API_CONFIGS[currentModel];
            const apiKey = API_KEYS[document.querySelector(`[data-model="${currentModel}"]`).dataset.key];
            
            if (!apiKey || apiKey.startsWith('sk-') && apiKey.includes('your-api-key')) {
                throw new Error('APIå¯†é’¥æœªé…ç½®ï¼Œè¯·ä¿®æ”¹ä»£ç ä¸­çš„API_KEYSå¯¹è±¡');
            }

            const messages = [{role: 'user', content: message}];
            
            const response = await fetch(config.baseURL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${apiKey}`
                },
                body: JSON.stringify({
                    model: config.model,
                    messages: messages,
                    stream: true
                })
            });

            if (!response.ok) {
                throw new Error(`HTTPé”™è¯¯: ${response.status}`);
            }

            const reader = response.body.getReader();
            const decoder = new TextDecoder();
            let accumulatedContent = '';
            let accumulatedReasoning = '';
            let thinkingMessage = null;
            let answerMessage = null;

            // ç§»é™¤åŠ è½½æç¤º
            document.querySelector('.message.loading')?.remove();

            // ä»…å¯¹reasoneræ¨¡å‹åˆ›å»ºæ€è€ƒæ¶ˆæ¯
            if (currentModel === 'deepseek-reasoner') {
                thinkingMessage = addMessage('assistant', '', 'thinking');
            }

            while (true) {
                const { done, value } = await reader.read();
                if (done) {
                    // æ€è€ƒå®Œæˆ
                    if (thinkingMessage) {
                        thinkingMessage.classList.add('completed');
                    }
                    break;
                }

                const chunk = decoder.decode(value, { stream: true });
                const lines = chunk.split('\n');
                
                for (const line of lines) {
                    if (line.startsWith('data: ')) {
                        const data = line.slice(6);
                        if (data === '[DONE]') continue;
                        
                        try {
                            const parsed = JSON.parse(data);
                            const delta = parsed.choices[0].delta;
                            
                            // å¤„ç†æ€è€ƒå†…å®¹ï¼ˆDeepSeek-Reasonerç‰¹æœ‰å­—æ®µï¼‰
                            if (delta.reasoning_content) {
                                accumulatedReasoning += delta.reasoning_content;
                                if (thinkingMessage) {
                                    const contentDiv = thinkingMessage.querySelector('.message-content');
                                    contentDiv.textContent = accumulatedReasoning;
                                    
                                    // è‡ªå‹•æ‘ºç–Šéé•·çš„æ€è€ƒå…§å®¹
                                    if (accumulatedReasoning.length > 500) {
                                        thinkingMessage.querySelector('.thinking-collapse-btn').textContent = 'å±•å¼€';
                                        contentDiv.style.display = 'none';
                                    }
                                }
                                scrollToBottom();
                            }
                            
                            // å¤„ç†æœ€ç»ˆç­”æ¡ˆ
                            if (delta.content) {
                                if (!answerMessage) {
                                    // å¦‚æœæ˜¯reasoneræ¨¡å‹ï¼Œéšè—æ€è€ƒæ¶ˆæ¯çš„è§†è§‰çªå‡ºæ•ˆæœ
                                    if (currentModel === 'deepseek-reasoner' && thinkingMessage) {
                                        thinkingMessage.style.opacity = '0.7';
                                    }
                                    answerMessage = addMessage('assistant', '');
                                }
                                accumulatedContent += delta.content;
                                const contentDiv = answerMessage.querySelector('.message-content');
                                contentDiv.textContent = accumulatedContent;
                                scrollToBottom();
                            }
                        } catch (e) {
                            // å¿½ç•¥è§£æé”™è¯¯
                        }
                    }
                }
            }

            // å¦‚æœæ²¡æœ‰æ”¶åˆ°ç­”æ¡ˆï¼ˆçº¯æ€è€ƒåœºæ™¯ï¼‰
            if (!answerMessage && accumulatedReasoning) {
                answerMessage = addMessage('assistant', '(æ€è€ƒå®Œæˆï¼Œè¯·å‚è€ƒè¯¦ç»†æ¨ç†è¿‡ç¨‹)');
            }
        }

        // ============= æ»šåŠ¨åˆ°åº•éƒ¨ =============
        function scrollToBottom() {
            const chatContainer = document.getElementById('chatContainer');
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // ============= çƒ­ç‚¹å¹³å°ç®¡ç† =============
        let currentPlatform = 'weibo';
        const HOT_APIS = {
            weibo: {
                url: 'https://api.jkyai.top/API/wbrsbd.php',
                name: 'å¾®åšçƒ­æœ',
                icon: 'ğŸ”¥'
            },
            zhihu: {
                url: 'https://v.api.aa1.cn/api/zhihu-news/',
                name: 'çŸ¥ä¹æ—¥æŠ¥',
                icon: 'ğŸ“š'
            },
            bilibili: {
                url: 'https://v.api.aa1.cn/api/bilibili-rs/',
                name: 'Bç«™çƒ­æ¦œ',
                icon: 'ğŸ¬'
            }
        };

        // ============= åˆ‡æ¢å¹³å° =============
        function switchPlatform(platform, event) {
            currentPlatform = platform;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // åŠ è½½å¯¹åº”å¹³å°çƒ­ç‚¹
            loadHotNews();
        }

        // ============= åŠ è½½çƒ­ç‚¹ =============
        async function loadHotNews() {
            const hotList = document.getElementById('hotList');
            const config = HOT_APIS[currentPlatform];
            
            hotList.innerHTML = '<div class="loading">æ­£åœ¨åŠ è½½...</div>';
            
            try {
                const response = await fetch(config.url);
                
                if (!response.ok) {
                    throw new Error(`HTTPé”™è¯¯: ${response.status}`);
                }
                
                const data = await response.json();
                
                // è§£æä¸åŒå¹³å°çš„è¿”å›æ ¼å¼
                let items = [];
                if (currentPlatform === 'weibo') {
                    items = (data.data || []).slice(0, 15).map((item, index) => ({
                        title: item.title,
                        heat: item.hot || '100ä¸‡+',
                        url: `https://s.weibo.com/weibo?q=${encodeURIComponent(item.title)}`
                    }));
                } else if (currentPlatform === 'zhihu') {
                    items = (data.news || []).slice(0, 15).map((item, index) => ({
                        title: item.title,
                        heat: item.hint || 'çŸ¥ä¹æ—¥æŠ¥',
                        url: item.url
                    }));
                } else if (currentPlatform === 'bilibili') {
                    items = (data.data || []).slice(0, 15).map((item, index) => ({
                        title: item.title,
                        heat: item.heat || '50ä¸‡+',
                        url: item.link || `https://search.bilibili.com/all?keyword=${encodeURIComponent(item.title)}`
                    }));
                }
                
                // æ¸²æŸ“åˆ—è¡¨
                hotList.innerHTML = '';
                if (items.length === 0) {
                    hotList.innerHTML = '<div class="hot-item"><p>æš‚æ— æ•°æ®</p></div>';
                    return;
                }
                
                items.forEach((item, index) => {
                    const hotItem = document.createElement('div');
                    hotItem.className = 'hot-item';
                    
                    let rankClass = 'rank-normal';
                    if (index < 3) rankClass = 'rank-hot';
                    else if (index < 6) rankClass = 'rank-new';
                    
                    hotItem.innerHTML = `
                        <div style="display: flex; align-items: flex-start;">
                            <span class="rank-num ${rankClass}">${index + 1}</span>
                            <div style="flex: 1; overflow: hidden;">
                                <h4 onclick="window.open('${item.url}', '_blank')" title="${item.title}">
                                    ${item.title}
                                </h4>
                                <p style="margin-top: 5px;">
                                    <span class="hot-source">${config.icon}</span>
                                    ${item.heat}
                                </p>
                            </div>
                        </div>
                    `;
                    hotList.appendChild(hotItem);
                });
                
            } catch (error) {
                hotList.innerHTML = `
                    <div class="hot-item">
                        <h4>âš ï¸ APIåŠ è½½å¤±è´¥ï¼Œç‚¹å‡»è®¿é—®å®˜æ–¹å†…å®¹</h4>
                        <p style="margin-top: 10px;">
                            <button onclick="window.open('${getOfficialUrl(currentPlatform)}', '_blank')" 
                                    style="padding: 8px 16px; background: var(--primary); color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 500;">
                                æ‰“å¼€${HOT_APIS[currentPlatform].name}
                            </button>
                        </p>
                        <p style="font-size: 13px; color: var(--gray); margin-top: 10px;">
                            é”™è¯¯è¯¦æƒ…: ${error.message}
                        </p>
                    </div>
                `;
                console.error('åŠ è½½å¤±è´¥:', error);
            }
        }

        // ============= è·å–å®˜æ–¹é“¾æ¥ =============
        function getOfficialUrl(platform) {
            const urls = {
                weibo: 'https://s.weibo.com/top/summary',
                zhihu: 'https://daily.zhihu.com/',
                bilibili: 'https://www.bilibili.com/v/popular/all'
            };
            return urls[platform];
        }

        // ============= æ—¶é—´å’Œæ—¥æœŸæ›´æ–°å‡½æ•° =============
        function updateDateTime() {
            const now = new Date();
            
            // æ›´æ–°æ—¶é—´ï¼ˆç²¾ç¡®åˆ°ç§’ï¼‰
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            const timeString = `${hours}:${minutes}:${seconds}`;
            document.getElementById('currentTime').textContent = timeString;
            
            // æ›´æ–°æ—¥æœŸï¼ˆæ ¼å¼ï¼šYYYY-MM-DDï¼‰
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const dateString = `${year}-${month}-${day}`;
            document.getElementById('currentDate').textContent = dateString;
        }

        // ============= åˆå§‹åŒ– =============
        document.addEventListener('DOMContentLoaded', function() {
            loadSessions();
            loadHotNews();
            
            // åˆå§‹åŒ–æ—¶é—´å’Œæ—¥æœŸ
            updateDateTime();
            
            // æ¯ç§’æ›´æ–°æ—¶é—´
            setInterval(updateDateTime, 1000);
            
            // å›è½¦å‘é€æ¶ˆæ¯
            document.getElementById('userInput').addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
            
            // è‡ªåŠ¨ä¿å­˜ä¼šè¯ï¼ˆæ¯30ç§’ï¼‰
            setInterval(() => {
                if (currentSessionId) {
                    saveCurrentSession();
                    saveSessions();
                }
            }, 30000);
        });
    </script>
</body>
</html>
